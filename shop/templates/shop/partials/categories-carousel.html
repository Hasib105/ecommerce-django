<div class="px-4 py-12 mx-auto transition-all duration-500 ease-linear md:px-8">
    <h3 class="mb-6 text-xl font-bold leading-tight lg:text-3xl">
        Product Categories
    </h3>
    <div class="relative">
        <div
            class="categories-container flex snap-x snap-mandatory overflow-hidden overflow-x-auto space-x-3 rounded scroll-smooth before:w-[45vw] before:shrink-0 after:w-[45vw] after:shrink-0 md:before:w-0 md:after:w-0">
            {% for category in categories %}
                <div class="flex flex-shrink-0 snap-center group">
                    <a
                        href="/categories/{{category.slug}}"
                        class="group category">
                        <div
                            class="w-20 h-20 overflow-hidden rounded-full shadow-md">
                            <img
                                alt="{{category.name}}"
                                src="{{category.category_image}}"
                                class="object-cover w-full h-full transition duration-500 ease-in-out group-hover:scale-110" />
                        </div>
                        <h3
                            class="w-20 mt-1 font-bold text-center text-text-900 group-hover:text-text-600 text-sm truncate ...">
                            {{category.name}}
                        </h3>
                    </a>
                </div>
            {% endfor %}
        </div>

        <div class="absolute top-0 items-center hidden h-full -left-10 md:flex">
            <button
                role="button"
                class="px-1 py-1 rounded-full prev-category bg-background-200 text-text-900 group opacity-50 transition-opacity duration-150 ease-[cubic-bezier(0.25,0.1,0.25,1.0)] hover:text-text-100 hover:opacity-90 focus:opacity-90"
                aria-label="prev-category">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-5 h-5 transition-all duration-200 ease-linear group-active:-translate-x-2">
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M15.75 19.5L8.25 12l7.5-7.5" />
                </svg>
            </button>
        </div>
        <div
            class="absolute top-0 items-center hidden h-full -right-10 md:flex">
            <button
                role="button"
                class="px-1 py-1 rounded-full next-category bg-background-200 text-text-900 group opacity-50 transition-opacity duration-150 ease-[cubic-bezier(0.25,0.1,0.25,1.0)] hover:text-text-100 hover:opacity-90 focus:opacity-90"
                aria-label="next-category">
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="w-5 h-5 transition-all duration-200 ease-linear group-active:translate-x-2">
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                </svg>
            </button>
        </div>
    </div>
</div>

<style>
    .categories-container {
        -ms-overflow-style: none; /* Internet Explorer 10+ */
        scrollbar-width: none; /* Firefox */
    }
    .categories-container::-webkit-scrollbar {
        display: none; /* Safari and Chrome */
    }
</style>

<script>
    const categoriesContainer = document.querySelector(".categories-container");
    const categoryWidth = categoriesContainer.querySelector(".category").clientWidth;
    const prevCategory = document.querySelector(".prev-category");
    const nextCategory = document.querySelector(".next-category");

    prevCategory.addEventListener("click", () => {
        categoriesContainer.scrollLeft += categoryWidth * 3;
    });

    prevCategory.addEventListener("click", () => {
        categoriesContainer.scrollLeft -= categoryWidth * 3;
    });
</script>
