<div class="p-4 mx-auto transition-all duration-500 ease-linear md:px-8">
    <h3 class="mb-6 text-xl font-bold leading-tight lg:text-3xl">
        Popular Brands
    </h3>
    <div class="relative">
        <div
            class="brands-container flex snap-x snap-mandatory overflow-hidden overflow-x-auto space-x-3 rounded scroll-smooth before:w-[45vw] before:shrink-0 after:w-[45vw] after:shrink-0 md:before:w-0 md:after:w-0">
            {% for category in categories %}
            <div class="flex flex-shrink-0 snap-start">
                <a
                    href="{% url 'category_details' category.slug %}"
                    class="block h-40 overflow-hidden rounded-md shadow-md group brand w-60">
                    <img
                        alt="{{category.name}}"
                        src="{{category.category_image}}"
                        class="object-cover w-full h-full transition duration-500 ease-in- hover:scale-110" />
                </a>
            </div>
            {% endfor %}
        </div>

        <div class="absolute top-0 items-center hidden h-full -left-10 md:flex">
            <button
                role="button"
                class="px-1 py-1 rounded-full prev-brand bg-background-200 text-text-900 group opacity-50 transition-opacity duration-150 ease-[cubic-bezier(0.25,0.1,0.25,1.0)] hover:text-text-100 hover:opacity-90 focus:opacity-90"
                aria-label="prev-brand">
                <span
                    class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-background-100 opacity-30 group-hover:opacity-50 group-focus:ring-2 group-focus:ring-background-800 group-focus:outline-none">
                    <svg
                        class="w-4 h-4 text-text-800"
                        aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 6 10">
                        <path
                            stroke="currentColor"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M5 1 1 5l4 4" />
                    </svg>
                    <span class="sr-only">Previous</span>
                </span>
            </button>
        </div>
        <div
            class="absolute top-0 items-center hidden h-full -right-10 md:flex">
            <button
                role="button"
                class="px-1 py-1 rounded-full next-brand bg-background-200 text-text-900 group opacity-50 transition-opacity duration-150 ease-[cubic-bezier(0.25,0.1,0.25,1.0)] hover:text-text-100 hover:opacity-90 focus:opacity-90"
                aria-label="next-brand">
                <span
                    class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-background-100 opacity-30 group-hover:opacity-50 group-focus:ring-2 group-focus:ring-background-800 group-focus:outline-none">
                    <svg
                        class="w-4 h-4 text-text-800"
                        aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 6 10">
                        <path
                            stroke="currentColor"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="m1 9 4-4-4-4" />
                    </svg>
                    <span class="sr-only">Next</span>
                </span>
            </button>
        </div>
    </div>
</div>

<style>
    .brands-container {
        -ms-overflow-style: none; /* Internet Explorer 10+ */
        scrollbar-width: none; /* Firefox */
    }
    .brands-container::-webkit-scrollbar {
        display: none; /* Safari and Chrome */
    }
</style>

<script>
    const brandsContainer = document.querySelector(".brands-container");
    const brandWidth = brandsContainer.querySelector(".brand").clientWidth;
    const prevBrand = document.querySelector(".prev-brand");
    const nextBrand = document.querySelector(".next-brand");

    nextBrand.addEventListener("click", () => {
        brandsContainer.scrollLeft += brandWidth * 3;
    });

    prevBrand.addEventListener("click", () => {
        brandsContainer.scrollLeft -= brandWidth * 3;
    });
</script>
